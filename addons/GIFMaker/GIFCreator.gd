
var file = null

func create_gif(name):
	print("Creating gif...")
	
	file = File.new()
	file.open("res://"+name+".gif", file.WRITE)
	
	# GIF89a header
	_write_word("GIF89a")
	
	# Width / Height
	_write_array([0x03,0x00,0x05,0x00])
	
	# Global Color Table
	_write_array([0xF7,0x00,0x00])
	_write_array([0x00,0x00,0x00])
	for i in range(0x27):
		_write_array([0x80,0x00,0x00])
	for i in range(0xD7):
		_write_array([0xFF,0x00,0x00])
	_write_array([0xFF,0xFF,0xFF])
	
	# Something
	_write_array([0x21,0xF9,0x04,0x01,0x00,0x00,0x10,0x00,0x2C,0x00,0x00,0x00,0x00,0x03,0x00,0x05,0x00,0x00,0x08,0x0B,0x00,0x51,0xFC,0x1B,0x28,0x70,0xA0,0xC1,0x83,0x01,0x01,0x00,0x3B])
	
	print("Done!")
	file.close()

# ===================== PRIVATE METHODS ========================

func _write_sequence(s, n):
	for i in range(n):
		file.store_8(s)

func _write_word(word):
	var buffer = word.to_ascii()
	file.store_buffer(buffer)

func _write_array(array):
	for i in array:
		file.store_8(i)